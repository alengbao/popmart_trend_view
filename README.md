# Pop Mart è¶‹åŠ¿åˆ†æç³»ç»Ÿ

ä¸€ä¸ªåŸºäº SwiftUI çš„æ™ºèƒ½è¶‹åŠ¿åˆ†æç³»ç»Ÿï¼Œç”¨äºå®æ—¶ç›‘æ§å’Œåˆ†æ Pop Mart ç›¸å…³è¶‹åŠ¿æ•°æ®ï¼Œå¹¶æä¾›æ™ºèƒ½é¢„è­¦åŠŸèƒ½ã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Pop Mart è¶‹åŠ¿åˆ†æç³»ç»Ÿ                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   æ¶ˆæ¯ç»„ä»¶   â”‚    â”‚   å±•ç¤ºç»„ä»¶   â”‚    â”‚   ç­–ç•¥ç»„ä»¶   â”‚    â”‚
â”‚  â”‚ Message     â”‚    â”‚ Display     â”‚    â”‚ Strategy    â”‚    â”‚
â”‚  â”‚ Component   â”‚    â”‚ Component   â”‚    â”‚ Component   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                   â”‚                   â”‚           â”‚
â”‚         â”‚                   â”‚                   â”‚           â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                             â”‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   æ ¸å¿ƒç»„ä»¶   â”‚â—„â”€â”€â”€â”¤ è¶‹åŠ¿è·å–ç»„ä»¶ â”‚    â”‚   æ•°æ®æº     â”‚    â”‚
â”‚  â”‚ Core        â”‚    â”‚ Trend       â”‚    â”‚ Data        â”‚    â”‚
â”‚  â”‚ Component   â”‚    â”‚ Fetcher     â”‚    â”‚ Sources     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‹ ç»„ä»¶è¯¦è§£

### 1. æ ¸å¿ƒç»„ä»¶ (Core Component)

**èŒè´£**: æ•°æ®å­˜å‚¨å’Œç®¡ç†çš„ä¸­å¤®æ¢çº½

**æ ¸å¿ƒç»“æ„**:
```swift
struct CoreComponent {
    // è¶‹åŠ¿æ•°æ®å­˜å‚¨ - Mapç»“æ„
    // Key: æ•°æ®æ¥æºæ ‡è¯† (å¦‚ "sales", "social", "inventory")
    // Value: å¯¹åº”çš„è¶‹åŠ¿æ•°æ®
    private var trendDataMap: [String: TrendInput] = [:]
    
    // æ•°æ®æ›´æ–°é€šçŸ¥
    private var updateCallbacks: [() -> Void] = []
}
```

**ä¸»è¦åŠŸèƒ½**:
- ğŸ“Š ç»Ÿä¸€ç®¡ç†æ‰€æœ‰è¶‹åŠ¿æ•°æ®
- ğŸ”„ æä¾›æ•°æ®æ›´æ–°æ¥å£
- ğŸ“¡ é€šçŸ¥å…¶ä»–ç»„ä»¶æ•°æ®å˜åŒ–
- ğŸ—‚ï¸ æ•°æ®æŒä¹…åŒ–å­˜å‚¨

**æ•°æ®æµ**:
```
è¶‹åŠ¿è·å–ç»„ä»¶ â†’ æ ¸å¿ƒç»„ä»¶ â†’ å±•ç¤ºç»„ä»¶/ç­–ç•¥ç»„ä»¶
```

### 2. è¶‹åŠ¿è·å–ç»„ä»¶ (Trend Fetcher Component)

**èŒè´£**: å¼‚æ­¥è·å–å„ç±»è¶‹åŠ¿æ•°æ®

**æ ¸å¿ƒç»“æ„**:
```swift
class TrendFetcher {
    // å¼‚æ­¥è·å–ä»»åŠ¡
    private var fetchTasks: [String: Task<Void, Never>] = [:]
    
    // å®šæ—¶å™¨ç®¡ç†
    private var timers: [String: Timer] = [:]
    
    // æ•°æ®æºé…ç½®
    private let dataSources: [DataSource]
}
```

**ä¸»è¦åŠŸèƒ½**:
- ğŸ”„ å®šæ—¶è‡ªåŠ¨è·å–è¶‹åŠ¿æ•°æ®
- ğŸ‘† æ”¯æŒæ‰‹åŠ¨è§¦å‘è·å–
- ğŸŒ å¤šæ•°æ®æºå¹¶è¡Œè·å–
- âš¡ å¼‚æ­¥å¤„ç†ï¼Œä¸é˜»å¡UI

**è·å–ç­–ç•¥**:
- **å®šæ—¶è·å–**: æ¯5åˆ†é’Ÿè‡ªåŠ¨è·å–ä¸€æ¬¡
- **æ‰‹åŠ¨è·å–**: ç”¨æˆ·ç‚¹å‡»åˆ·æ–°æŒ‰é’®
- **æ™ºèƒ½è·å–**: æ ¹æ®æ•°æ®å˜åŒ–é¢‘ç‡è°ƒæ•´è·å–é—´éš”

### 3. å±•ç¤ºç»„ä»¶ (Display Component)

**èŒè´£**: å°†è¶‹åŠ¿æ•°æ®å¯è§†åŒ–å±•ç¤º

**æ ¸å¿ƒç»“æ„**:
```swift
struct TrendDisplayView: View {
    @ObservedObject var coreComponent: CoreComponent
    @State private var selectedTrend: String?
    @State private var selectedPoint: TrendData?
}
```

**ä¸»è¦åŠŸèƒ½**:
- ğŸ“ˆ å¤šè¶‹åŠ¿æ›²çº¿å›¾å±•ç¤º
- ğŸ” æ”¯æŒé•¿æŒ‰æŸ¥çœ‹æ•°æ®ç‚¹è¯¦æƒ…
- ğŸ“± å“åº”å¼ç•Œé¢è®¾è®¡
- ğŸ¨ ç¾è§‚çš„å›¾è¡¨æ ·å¼

**äº¤äº’åŠŸèƒ½**:
- **é•¿æŒ‰å›¾è¡¨**: æŸ¥çœ‹å…·ä½“æ•°æ®ç‚¹çš„æ—¶é—´å’Œæ•°å€¼
- **åˆ‡æ¢è¶‹åŠ¿**: åœ¨ä¸åŒæ•°æ®æºä¹‹é—´åˆ‡æ¢
- **ç¼©æ”¾æŸ¥çœ‹**: æ”¯æŒå›¾è¡¨ç¼©æ”¾å’Œæ‹–æ‹½

### 4. ç­–ç•¥ç»„ä»¶ (Strategy Component)

**èŒè´£**: åˆ†æè¶‹åŠ¿æ•°æ®å¹¶è§¦å‘é¢„è­¦

**æ ¸å¿ƒç»“æ„**:
```swift
protocol TrendStrategy {
    func analyze(trendData: TrendInput) -> StrategyResult
}

class StrategyEngine {
    private var strategies: [TrendStrategy] = []
    
    func runStrategies(trendData: [String: TrendInput]) -> [AlertMessage]
}
```

**å†…ç½®ç­–ç•¥**:
- ğŸ“ˆ **ä¸Šå‡è¶‹åŠ¿æ£€æµ‹**: æ£€æµ‹é”€é‡å¿«é€Ÿä¸Šå‡
- ğŸ“‰ **ä¸‹é™è¶‹åŠ¿æ£€æµ‹**: æ£€æµ‹é”€é‡å¼‚å¸¸ä¸‹é™
- ğŸ¯ **ç›®æ ‡è¾¾æˆæ£€æµ‹**: æ£€æµ‹æ˜¯å¦è¾¾åˆ°é”€å”®ç›®æ ‡
- âš ï¸ **å¼‚å¸¸æ³¢åŠ¨æ£€æµ‹**: æ£€æµ‹æ•°æ®å¼‚å¸¸æ³¢åŠ¨

**ç­–ç•¥æ‰§è¡Œæµç¨‹**:
```
è¶‹åŠ¿æ•°æ®æ›´æ–° â†’ ç­–ç•¥å¼•æ“åˆ†æ â†’ ç”Ÿæˆé¢„è­¦æ¶ˆæ¯ â†’ å‘é€ç»™æ¶ˆæ¯ç»„ä»¶
```

### 5. æ¶ˆæ¯ç»„ä»¶ (Message Component)

**èŒè´£**: æ¶ˆæ¯å‘é€å’Œå±•ç¤º

**æ ¸å¿ƒç»“æ„**:
```swift
struct AlertMessage {
    let id: UUID
    let title: String
    let content: String
    let level: AlertLevel
    let timestamp: Date
    let trendSource: String
}

class MessageManager {
    private var messages: [AlertMessage] = []
    private var notificationService: NotificationService
}
```

**ä¸»è¦åŠŸèƒ½**:
- ğŸ“± æ¨é€é€šçŸ¥å‘é€
- ğŸ’¬ åº”ç”¨å†…æ¶ˆæ¯å±•ç¤º
- ğŸ”” å£°éŸ³å’Œéœ‡åŠ¨æé†’
- ğŸ“‹ æ¶ˆæ¯å†å²è®°å½•

## ğŸ”„ ç»„ä»¶äº¤äº’æµç¨‹

### 1. æ•°æ®è·å–æµç¨‹
```
ç”¨æˆ·æ“ä½œ/å®šæ—¶å™¨è§¦å‘
    â†“
è¶‹åŠ¿è·å–ç»„ä»¶å¯åŠ¨å¼‚æ­¥ä»»åŠ¡
    â†“
å¹¶è¡Œè·å–å¤šä¸ªæ•°æ®æº
    â†“
æ•°æ®ä¼ å…¥æ ¸å¿ƒç»„ä»¶
    â†“
æ ¸å¿ƒç»„ä»¶æ›´æ–°å­˜å‚¨å¹¶é€šçŸ¥å…¶ä»–ç»„ä»¶
    â†“
å±•ç¤ºç»„ä»¶æ›´æ–°ç•Œé¢
    â†“
ç­–ç•¥ç»„ä»¶åˆ†ææ•°æ®
    â†“
ç”Ÿæˆé¢„è­¦æ¶ˆæ¯
    â†“
æ¶ˆæ¯ç»„ä»¶å‘é€é€šçŸ¥
```

### 2. ç”¨æˆ·äº¤äº’æµç¨‹
```
ç”¨æˆ·é•¿æŒ‰å›¾è¡¨
    â†“
å±•ç¤ºç»„ä»¶è·å–ç‚¹å‡»ä½ç½®
    â†“
è®¡ç®—æœ€è¿‘çš„æ•°æ®ç‚¹
    â†“
æ˜¾ç¤ºæ•°æ®ç‚¹è¯¦æƒ…å¼¹çª—
```

### 3. ç­–ç•¥æ‰§è¡Œæµç¨‹
```
è¶‹åŠ¿æ•°æ®æ›´æ–°
    â†“
ç­–ç•¥å¼•æ“æ”¶é›†æ‰€æœ‰ç­–ç•¥
    â†“
å¹¶è¡Œæ‰§è¡Œç­–ç•¥åˆ†æ
    â†“
æ±‡æ€»åˆ†æç»“æœ
    â†“
ç”Ÿæˆé¢„è­¦æ¶ˆæ¯
    â†“
æ¶ˆæ¯ç»„ä»¶å¤„ç†æ¶ˆæ¯
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **UIæ¡†æ¶**: SwiftUI
- **å›¾è¡¨åº“**: SwiftUI Charts
- **å¼‚æ­¥å¤„ç†**: Swift Concurrency (async/await)
- **æ•°æ®å­˜å‚¨**: Core Data / UserDefaults
- **ç½‘ç»œè¯·æ±‚**: URLSession
- **æ¨é€é€šçŸ¥**: UserNotifications

## ğŸ“± ç•Œé¢é¢„è§ˆ

### ä¸»ç•Œé¢
- è¶‹åŠ¿æ›²çº¿å›¾å±•ç¤º
- å¤šæ•°æ®æºåˆ‡æ¢
- å®æ—¶æ•°æ®æ›´æ–°
- äº¤äº’å¼å›¾è¡¨æ“ä½œ

### æ¶ˆæ¯ä¸­å¿ƒ
- é¢„è­¦æ¶ˆæ¯åˆ—è¡¨
- æ¶ˆæ¯è¯¦æƒ…æŸ¥çœ‹
- æ¶ˆæ¯çŠ¶æ€ç®¡ç†
- å†å²è®°å½•æµè§ˆ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®
```bash
git clone [é¡¹ç›®åœ°å€]
cd popmart_trend_view
```

### 2. æ‰“å¼€é¡¹ç›®
```bash
open popmart_trend_view.xcodeproj
```

### 3. è¿è¡Œé¡¹ç›®
- é€‰æ‹©ç›®æ ‡è®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨
- ç‚¹å‡»è¿è¡ŒæŒ‰é’®æˆ–æŒ‰ `Cmd + R`

## ğŸ”§ é…ç½®è¯´æ˜

### æ•°æ®æºé…ç½®
```swift
// åœ¨ TrendFetcher ä¸­é…ç½®æ•°æ®æº
let dataSources = [
    DataSource(name: "sales", url: "api/sales/trend"),
    DataSource(name: "social", url: "api/social/trend"),
    DataSource(name: "inventory", url: "api/inventory/trend")
]
```

### ç­–ç•¥é…ç½®
```swift
// åœ¨ StrategyEngine ä¸­æ·»åŠ ç­–ç•¥
let strategies: [TrendStrategy] = [
    RisingTrendStrategy(),
    FallingTrendStrategy(),
    TargetAchievementStrategy(),
    AnomalyDetectionStrategy()
]
```

## ğŸ“Š æ•°æ®ç»“æ„

### TrendInput
```swift
struct TrendInput {
    let name: String           // è¶‹åŠ¿åç§°
    let data: [TrendData]      // è¶‹åŠ¿æ•°æ®ç‚¹
    let source: String         // æ•°æ®æ¥æº
    let lastUpdate: Date       // æœ€åæ›´æ–°æ—¶é—´
}
```

### TrendData
```swift
struct TrendData: Identifiable {
    let id = UUID()
    let date: Date            // æ—¶é—´ç‚¹
    let value: Double         // æ•°å€¼
    let metadata: [String: Any]? // é¢å¤–å…ƒæ•°æ®
}
```

## ğŸ”® æœªæ¥è§„åˆ’

- [ ] æœºå™¨å­¦ä¹ è¶‹åŠ¿é¢„æµ‹
- [ ] æ›´å¤šæ•°æ®æºé›†æˆ
- [ ] è‡ªå®šä¹‰ç­–ç•¥é…ç½®
- [ ] æ•°æ®å¯¼å‡ºåŠŸèƒ½
- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] æ·±è‰²æ¨¡å¼ä¼˜åŒ–

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

**Pop Mart è¶‹åŠ¿åˆ†æç³»ç»Ÿ** - è®©æ•°æ®æ´å¯Ÿæ›´ç®€å• ğŸ“ˆ
